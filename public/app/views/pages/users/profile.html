<section>
	<div class="col-xs-12" id="profilePage">
		<div id="warPageTitle">
			<h3>{{ user.profile.name }}'s Profile</h3>
		</div>
		<hr>
		<!-- LOADING MESSAGE -->
		<div class="jumbotron text-center" ng-show="user.loadingPage"> 
			<span class="glyphicon glyphicon-repeat spinner"></span>
			<p>Loading Profile...</p>
		</div>
		<div ng-show="!user.loadingPage">
			<div class="col-sm-12">
				<!-- War Stats Overview -->
				<div id="warStatsOverall" class="infoContainer col-sm-4 col-xs-12">
					<div class="col-xs-12">
						<div>
							<div >
								Wars Fought<br>
								{{ user.profile.warsFought }}
							</div>
							<hr class="accentBlue">
							<div>
								Stars Gained<br>
								{{ user.profile.starsGained }}
							</div>
							<hr class="accentBlue">
							<div>
								3-Star Rate<br>
								{{ user.profile.threeStarRate.toFixed(2) }} %
							</div>
						</div>
					</div>
				</div>
				<!-- Attack Stats -->
				<div id="attackStats" class="infoContainer col-sm-4 col-xs-12">
					<div>
						<div>
							All War Stars
							<canvas id="starChart" class="chart chart-bar" chart-data="stars" chart-labels="labels"></canvas>
						</div>
					</div>
				</div>
				<!-- Hero Stats -->
				<div id="heroStats" class="infoContainer col-sm-4 col-xs-12">
					<div class="col-xs-12">
						<div>
							<div >
								Town Hall<br>
								<select ng-change="user.setMaxLvls()" ng-model="user.profile.thLvl"
									ng-options="option for option in user.thLvls">
								</select>
							</div>
							<hr class="accentBlue">
							<div>
								Barbarian King<br>
								<select ng-model="user.profile.barbLvl" 
									ng-options="option for option in user.kingLvls">
								</select>
								
								<button type="button" class="btn btn-default" ng-click="user.open()">Open me!</button>

								<!-- Modal -->
								<div class="modal fade bs-example-modal-sm excludeAnimation" tabindex="-1" role="dialog">
									<div class="modal-dialog modal-sm">
										<div class="modal-content">
											...
										</div>
									</div>
								</div>
							</div>
							<hr class="accentBlue">
							<div>
								Archer Queen<br>
								<select ng-model="user.profile.queenLvl" 
									ng-options="option for option in user.queenLvls">
								</select>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- ERROR MESSAGE -->
			<div class="alert alert-danger col-sm-offset-4 col-sm-4 col-xs-12" ng-show="user.error">
				{{ user.error }}
			</div>
			<!-- SUCCESS MESSAGE -->
			<div class="alert alert-success col-sm-offset-4 col-sm-4 col-xs-12" ng-show="user.message">
				{{ user.message }}
			</div>
			<div ng-if="main.userInfo.name == user.profile.name || main.userInfo.admin" class="col-sm-offset-4 col-sm-4 col-xs-12">
				<button ng-click="user.updateProfile()" class="btn btn-lg btn-block updateButton">
					<span ng-show="!user.updating"> Update Profile </span>
					<div ng-show="user.updating">
						<span class="glyphicon glyphicon-repeat spinner"></span> 
					</div>
				</button>
			</div>

			<!-- All Attacks -->
			<div id="allAttacks" class="col-sm-offset-2 col-sm-8 col-xs-12">
				<div class="col-xs-12">
					<table class="table table-bordered table-striped col-xs-12" ng-show="user.profile.wars"> 
						<thead>
							<tr>
								<th>Opponent</th> 
								<th>You</th>
								<th>Opp</th>
								<th>Stars</th>
								<!-- <th>%</th> -->
							</tr>
						</thead>
						<tbody>
							<!-- LOOP OVER THE USERS -->
							<tr ng-repeat="war in user.profile.wars" class="excludeAnimation"> 
								<td>{{ war.opponent }}</td>
								<td>{{ war.you }}</td>
								<td>{{ war.opp }}</td>
								<td>
									<div>
										<span ng-show="war.stars > 0" class="glyphicons glyphicons-star drop"></span>
										<span ng-show="war.stars > 1" class="glyphicons glyphicons-star drop"></span>
										<span ng-show="war.stars > 2" class="glyphicons glyphicons-star drop"></span>
										<span ng-hide="war.stars > 0" class="glyphicons glyphicons-star-empty drop"></span>
										<span ng-hide="war.stars > 1" class="glyphicons glyphicons-star-empty drop"></span>
										<span ng-hide="war.stars > 2" class="glyphicons glyphicons-star-empty drop"></span>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>

	<script type="text/ng-template" id="myModalContent.html">
		<div class="modal-header">
			<h3 class="modal-title">Im a modal!</h3>
		</div>
		<div class="modal-body">
			<ul>
				<li ng-repeat="item in items" class="excludeAnimation">
					<a href="#" ng-click="$event.preventDefault(); selected.item = item">{{ item }}</a>
				</li>
			</ul>
			Selected: <b>{{ selected.item }}</b>
		</div>
		<div class="modal-footer">
			<button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
			<button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
		</div>
	</script>
</section>






