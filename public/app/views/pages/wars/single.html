<section>
	<div class="col-xs-12" id="warPage">
		<div id="warPageTitle">
			<h3 ng-if="war.type == 'create'">New War Log</h3>
			<h3 ng-if="war.type == 'edit'">Update War Log</h3>
			<h3 ng-if="war.type == 'view'">View War</h3>
		</div>
		<hr>
		<form ng-show="!war.loadingPage">
			<!-- War Stats -->
			<div id="warStats" class="col-xs-12">
				<div ng-class="war.warStatsSubContainer">
					<div class="col-xs-12">
						<!-- Content for Create and Edit Page -->
						<div ng-if="war.type != 'view'">
							<div id="clanName">
								Space Monkeys
							</div>
							<hr>
							<div>
								<select ng-disabled="war.inProgress" ng-init="war.setMaxStars()" ng-model="war.warData.ourScore" ng-class="war.inProgressClass">
									<option value="" disabled selected>Stars</option>
									<option ng-repeat="option in war.maxStars" value="{{option}}">{{ option }}</option>
								</select>
							</div>
							<hr>
							<div>
								<div>
									<input ng-disabled="war.inProgress" ng-model="war.warData.ourDest" type="number" class="form-control" placeholder="Destruction" class="unstyled" step="0.01">
								</div>
							</div>
						</div>
						<!-- Content for View Page -->
						<div ng-if="war.type == 'view'">
							<div >
								Space Monkeys
							</div>
							<hr>
							<div>
								<div ng-if="war.inProgress">
									VS
								</div>
								<div ng-if="!war.inProgress">
									{{ war.warData.ourScore }}
								</div>
							</div>
							<hr>
							<div>
								<div ng-if="war.inProgress">
									{{ war.warData.opponent }}
								</div>
								<div ng-if="!war.inProgress">
									{{ war.warData.ourDest }}
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-4 col-xs-12">
					<div class="col-xs-12">
						<!-- Content for Create and Edit Page -->
						<div ng-if="war.type != 'view'">
							<div>
								<select ng-change="war.setMaxStars()" ng-init="war.warData.size = war.sizeOptions[0].value" ng-model="war.warData.size"
										ng-options="option.value as option.display for option in war.sizeOptions">
								</select>
							</div>
							<hr>
							<div>
								<div>
									<input id="dateTime" ng-change="war.checkDate()" type="datetime-local" ng-model="war.warData.startDisplay" class="unstyled">
								</div>
							</div>
							<hr>
							<div>
								<div ng-hide="war.inProgress">
									<input type="number" ng-model="war.warData.exp" class="form-control" placeholder="Exp Gained">
								</div>
								<div ng-show="war.inProgress">
									{{ war.warStatus }}
								</div>
							</div>
						</div>
						<!-- Content for View Page -->
						<div ng-if="war.type == 'view'">
							<div >
								{{ war.warData.size }} vs {{ war.warData.size }}
							</div>
							<hr>
							<div>
								{{ war.warStatus }}
							</div>
							<hr>
							<div>
								<timer ng-if="war.warStatus == 'Battle Day'" ng-attr-end-time="war.battleCountdown" 
									max-time-unit="'hour'" interval="1000" class="excludeAnimation">{{hours}}H {{mminutes}}M {{sseconds}}S</timer>
								<timer ng-if="war.warStatus == 'Preparation Day'" ng-attr-end-time="war.preparationCountdown" 
									finish-callback="war.reloadPage()" max-time-unit="'hour'" 
									interval="1000" class="excludeAnimation">{{hours}}H {{mminutes}}M {{sseconds}}S</timer>
								<div ng-if="war.warStatus == 'War Over'" class="excludeAnimation">
									{{ war.warData.exp }}
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-4 col-xs-12" ng-if="war.type != 'view' || !war.inProgress">
					<div class ="col-xs-12">
						<!-- Content for Create and Edit Page -->
						<div ng-if="war.type != 'view'">
							<div>
								<input ng-model="war.warData.opponent" type="text" class="form-control" placeholder="Opponent Name">
							</div>
							<hr>
							<div>
								<select ng-disabled="war.inProgress" ng-model="war.warData.theirScore" ng-class="war.inProgressClass">
									<option value="" disabled selected>Stars</option>
									<option ng-repeat="option in war.maxStars" value="{{ option }}">{{ option }}</option>
								</select>
							</div>
							<hr>
							<div>
								<div>
									<input ng-disabled="war.inProgress" ng-model="war.warData.theirDest" type="number" class="form-control" placeholder="Destruction" class="unstyled" step="0.01">
								</div>
							</div>
						</div>
						<!-- Content for View Page -->
						<div ng-if="war.type == 'view'">
							<div >
								{{ war.warData.opponent }}
							</div>
							<hr>
							<div>
								{{ war.warData.theirScore }}
							</div>
							<hr>
							<div>
								{{ war.warData.theirDest }}
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Warriors Stats -->
			<div ng-show="war.showWarriors" id="warriorStats" class="col-xs-12">
				<div ng-show="!war.warriorsReady" class="jumbotron text-center"> 
					<span class="glyphicon glyphicon-repeat spinner"></span>
					<p>Loading Warriors...</p>
				</div>
				<div ng-show="war.warriorsReady" class="col-xs-12">
					<!-- Warrior Template -->
					<div ng-repeat="warrior in war.warData.warriors" id="warriorTemplate" class="row excludeAnimation">
						<div class="col-sm-6 col-xs-12 warriorNames">
							<!-- Warrior Name and View Icon -->
							<div ng-class="war.nameClass">
								<span ng-if="war.type == 'view'" ng-show="warrior.viewed" class="pull-left glyphicons glyphicons-eye-open accentBlue"></span>
								<span ng-if="war.type == 'view'" ng-hide="warrior.viewed" class="pull-left glyphicons glyphicons-eye-open"></span>
								<select ng-if="war.type != 'view'" ng-model="warrior.name" ng-change="war.adjustUsers()">
									<option value="{{warrior.name}}" selected>{{warrior.name}}</option>
									<option ng-repeat="option in war.warData.actUsers" value="{{ option }}">{{ option }}</option>
								</select>
								<div ng-if="war.type == 'view'">
									{{ warrior.name }}
								</div>
							</div>
							<!-- Move Warrior option -->
							<div ng-if="war.type != 'view'" class="col-xs-6">
								<select ng-model="war.command" ng-change="war.moveWarrior(warrior.name, war.command)"
									ng-disabled="warrior.name == 'Pick Warrior'" ng-options="option for option in war.commandOptions">
								</select>
							</div>
						</div>
						<div class="col-sm-6 col-xs-12 warriorAttacks">
							<!-- Attack 1 -->
							<div class="attacks" ng-class="war.attackClass">
								<select ng-if="war.type != 'view'" ng-model="warrior.attack1" ng-disabled="warrior.name == 'Pick Warrior'"
									ng-change="war.adjustTargets(); warrior.lock1 = true; warrior.viewed = false">
									<option value="{{warrior.attack1}}" selected>{{ warrior.attack1 }}</option>
									<option value="Pick" ng-if="warrior.attack1 != 'Pick'">Pick</option>
									<option value="Hold" ng-if="warrior.attack1 != 'Hold'">Hold</option>
									<option value="Ask" ng-if="warrior.attack1 != 'Ask'">Ask</option>
									<option value="Scout" ng-if="warrior.attack1 != 'Scout'">Scout</option>
									<option value="Practice" ng-if="warrior.attack1 != 'Practice'">Practice</option>
									<option ng-repeat="option in war.attackOptions" value="{{ option }}">{{ option }}</option>
								</select>
								<select ng-model="warrior.attack1" ng-change="war.adjustTargets()"
									ng-if="war.type == 'view' && main.userInfo.name == warrior.name && !warrior.lock1">
									<option value="{{warrior.attack1}}" selected>{{ warrior.attack1 }}</option>
									<option ng-repeat="option in war.attackOptions" value="{{ option }}">{{ option }}</option>
								</select>
								<div ng-if="war.type == 'view' && (main.userInfo.name != warrior.name || warrior.lock1)">
									{{ warrior.attack1 }}
								</div>
							</div>
							<!-- Attack 2 -->
							<div class="attacks" ng-class="war.attackClass">
								<select ng-if="war.type != 'view'" ng-model="warrior.attack2" ng-disabled="warrior.name == 'Pick Warrior'"
									ng-change="war.adjustTargets(); warrior.lock2 = true; warrior.viewed = false">
									<option value="{{warrior.attack2}}" selected>{{ warrior.attack2 }}</option>
									<option value="Pick" ng-if="warrior.attack2 != 'Pick'">Pick</option>
									<option value="Hold" ng-if="warrior.attack2 != 'Hold'">Hold</option>
									<option value="Ask" ng-if="warrior.attack2 != 'Ask'">Ask</option>
									<option value="Scout" ng-if="warrior.attack2 != 'Scout'">Scout</option>
									<option value="Practice" ng-if="warrior.attack2 != 'Practice'">Practice</option>
									<option ng-repeat="option in war.attackOptions2" ng-if="warrior.attack1 != option" value="{{ option }}">{{ option }}</option>
								</select>
								<select ng-model="warrior.attack2" ng-change="war.adjustTargets()"
									ng-if="war.type == 'view' && main.userInfo.name == warrior.name && !warrior.lock2">
									<option value="{{warrior.attack2}}" selected>{{ warrior.attack2 }}</option>
									<option ng-repeat="option in war.attackOptions" value="{{ option }}">{{ option }}</option>
								</select>
								<div ng-if="war.type == 'view' && main.userInfo.name != warrior.name || warrior.lock2">
									{{ warrior.attack2 }}
								</div>
							</div>
							<!-- Lock 1 -->
							<div ng-if="war.type != 'view'" class="col-xs-6 warriorLocks">
								<span ng-disabled="war.type == 'view'" ng-show="warrior.lock1" ng-click="warrior.lock1 = !warrior.lock1" class="glyphicons glyphicons-lock"></span>
								<span ng-disabled="war.type == 'view'" ng-hide="warrior.lock1" ng-click="warrior.lock1 = !warrior.lock1" class="glyphicons glyphicons-unlock"></span>
							</div>
							<!-- Lock 2 -->
							<div ng-if="war.type != 'view'" class="col-xs-6 warriorLocks">
								<span ng-show="warrior.lock2" ng-click="warrior.lock2 = !warrior.lock2" class="glyphicons glyphicons-lock"></span>
								<span ng-hide="warrior.lock2" ng-click="warrior.lock2 = !warrior.lock2" class="glyphicons glyphicons-unlock"></span>
							</div>
						</div>
						<div class="col-xs-12">
							<hr>
						</div>
					</div>
				</div>
			</div>
			<!-- Image Upload Div -->
			<div ng-show="war.showWarriors" id="warriorStats" class="col-xs-12">
				
			</div>
			<!-- Message Div -->
			<div class="row show-hide-message" ng-show="war.message">
				<div class="col-sm-4 col-sm-offset-4 col-xs-12">
					<div class="alert alert-info">
						{{ war.message }}
					</div>
				</div>
			</div>
			<!-- Button to Show Warriors -->
			<div ng-click="war.genWarriorList()" ng-if="war.type == 'create'" ng-hide="war.showWarriors" class="col-sm-offset-4 col-sm-4 col-xs-12">
				<button class="btn btn-lg btn-block warButton">Warrior List</button>
			</div>
			<!-- Button to Submit War or Update War -->
			<div ng-show="war.showWarriors && war.warriorsReady" id="warSubmit" class="row col-sm-offset-4 col-sm-4 col-xs-12">
				<button ng-click="war.saveWar()" class="btn btn-lg btn-block warButton" ng-if="war.type == 'create'">Create War</button>
				<button ng-click="war.updateWar(true)" class="btn btn-lg btn-block warButton" ng-if="war.type != 'create'">Update War</button>
			</div>
		</form>
		<div ng-show="war.loadingPage" class="jumbotron text-center" ng-show="war.processing"> 
			<span class="glyphicon glyphicon-repeat spinner"></span>
			<p>Loading War...</p>
		</div>
	</div>
</section>