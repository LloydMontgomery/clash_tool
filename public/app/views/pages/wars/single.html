<section>
	<div class="col-xs-12" id="warPage">
		<div>
			<h1 ng-if="war.type == 'create'">War Has Begun!</h1>
			<h1 ng-if="war.type == 'edit'">Update War Log</h1>
			<h1 ng-if="war.type == 'view'">View War</h1>
		</div>
		<hr>
		<form ng-show="!war.loadingPage">
			<!-- War Stats -->
			<div id="warStats" class="col-xs-12">
				<div class="col-sm-4 col-xs-12">
					<div class="col-xs-12">
						<!-- Content for Create and Edit Page -->
						<div ng-if="war.type != 'view'">
							<div>
								<select ng-change="war.setMaxStars()" ng-init="war.warData.size = war.sizeOptions[0].value" ng-model="war.warData.size"
										ng-options="option.value as option.display for option in war.sizeOptions">
								</select>
							</div>
							<hr>
							<div>
								<div>
									<input id="dateTime" ng-change="war.checkDate()" type="datetime-local" ng-model="war.warData.start" class="unstyled">
								</div>
							</div>
							<hr>
							<div>
								<div ng-hide="war.inProgress">
									<input type="number" ng-model="war.warData.exp" class="form-control" placeholder="Exp Gained">
								</div>
								<div ng-show="war.inProgress">
									{{ war.warStatus }}
								</div>
							</div>
						</div>
						<!-- Content for View Page -->
						<div ng-if="war.type == 'view'">
							<div >
								{{ war.warData.size }} vs {{ war.warData.size }}
							</div>
							<hr>
							<div>
								{{ war.warStatus }}
							</div>
							<hr>
							<div>
								<timer ng-if="war.warStatus == 'Battle Day'" ng-attr-end-time="war.battleCountdown" 
									max-time-unit="'hour'" interval="1000" class="excludeAnimation">{{hours}}H {{mminutes}}M {{sseconds}}S</timer>
								<timer ng-if="war.warStatus == 'Preparation Day'" ng-attr-end-time="war.preparationCountdown" 
									finish-callback="war.reloadPage()" max-time-unit="'hour'" 
									interval="1000" class="excludeAnimation">{{hours}}H {{mminutes}}M {{sseconds}}S</timer>
								<div ng-if="war.warStatus == 'War Over'" class="excludeAnimation">
									{{ war.warData.exp }}
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-4 col-xs-12">
					<div class ="col-xs-12">
						<!-- Content for Create and Edit Page -->
						<div ng-if="war.type != 'view'">
							<div id="clanName">
								Space Monkeys
							</div>
							<hr>
							<div>
								<select ng-disabled="war.inProgress" ng-init="war.setMaxStars()" ng-model="war.warData.ourScore" ng-class="war.inProgressClass">
									<option value="" disabled selected>Stars</option>
									<option ng-repeat="option in war.maxStars" value="{{option}}">{{ option }}</option>
								</select>
							</div>
							<hr>
							<div>
								<div>
									<input ng-disabled="war.inProgress" ng-model="war.warData.ourDest" type="number" class="form-control" placeholder="Destruction" class="unstyled" step="0.01">
								</div>
							</div>
						</div>
						<!-- Content for View Page -->
						<div ng-if="war.type == 'view'">
							<div >
								Space Monkeys
							</div>
							<hr>
							<div>
								{{ war.warData.ourScore }}
							</div>
							<hr>
							<div>
								{{ war.warData.ourDest }}
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-4 col-xs-12">
					<div class ="col-xs-12">
						<!-- Content for Create and Edit Page -->
						<div ng-if="war.type != 'view'">
							<div>
								<input ng-model="war.warData.opponent" type="text" class="form-control" placeholder="Opponent Name">
							</div>
							<hr>
							<div>
								<select ng-disabled="war.inProgress" ng-model="war.warData.theirScore" ng-class="war.inProgressClass">
									<option value="" disabled selected>Stars</option>
									<option ng-repeat="option in war.maxStars" value="{{ option }}">{{ option }}</option>
								</select>
							</div>
							<hr>
							<div>
								<div>
									<input ng-disabled="war.inProgress" ng-model="war.warData.theirDest" type="number" class="form-control" placeholder="Destruction" class="unstyled" step="0.01">
								</div>
							</div>
						</div>
						<!-- Content for View Page -->
						<div ng-if="war.type == 'view'">
							<div >
								{{ war.warData.opponent }}
							</div>
							<hr>
							<div>
								{{ war.warData.theirScore }}
							</div>
							<hr>
							<div>
								{{ war.warData.theirDest }}
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Warriors Stats -->
			<div ng-show="war.showWarriors" id="warriorStats" class="col-xs-12">
				<div ng-show="!war.warriorsReady" class="jumbotron text-center"> 
					<span class="glyphicon glyphicon-repeat spinner"></span>
					<p>Loading Warriors...</p>
				</div>
				<div ng-show="war.warriorsReady" class="col-xs-12">
					<!-- Warrior Template -->
					<div>
						<table class="table table-bordered table-striped"> 
							<tbody>
								<tr ng-repeat="warrior in war.warData.warriors" class="excludeAnimation">
									<td>
										<div ng-if="war.type != 'view'">
											<select ng-model="war.command" ng-change="war.moveWarrior(warrior.name, war.command)"
												ng-disabled="warrior.name == 'Pick Warrior'" ng-options="option for option in war.commandOptions">
											</select>
										</div>
									</td>
									<td>
										<div>
											{{ warrior.name }}
										</div>
										<div>
											<span ng-show="warrior.viewed" class="glyphicons glyphicons-eye-open accentBlue"></span>
											<span ng-hide="warrior.viewed" class="glyphicons glyphicons-eye-open"></span>
										</div>
									</td>
									<!-- Attack 1 -->
									<td>
										<div>
											<select ng-if="war.type != 'view'" ng-model="warrior.attack1" ng-disabled="warrior.name == 'Pick Warrior'"
												ng-change="war.adjustTargets(); warrior.lock1 = true; warrior.viewed = false">
												<option value="{{warrior.attack1}}" selected>{{ warrior.attack1 }}</option>
												<option value="Pick" ng-if="warrior.attack1 != 'Pick'">Pick</option>
												<option value="Hold" ng-if="warrior.attack1 != 'Hold'">Hold</option>
												<option value="Ask" ng-if="warrior.attack1 != 'Ask'">Ask</option>
												<option value="Scout" ng-if="warrior.attack1 != 'Scout'">Scout</option>
												<option value="Practice" ng-if="warrior.attack1 != 'Practice'">Practice</option>
												<option ng-repeat="option in war.attackOptions" value="{{ option }}">{{ option }}</option>
											</select>
											<select ng-if="war.type == 'view'" ng-model="warrior.attack1" ng-change="war.adjustTargets()"
												ng-disabled="warrior.lock1 || main.userInfo.name != warrior.name">
												<option value="{{warrior.attack1}}" selected>{{ warrior.attack1 }}</option>
												<option ng-repeat="option in war.attackOptions" value="{{ option }}">{{ option }}</option>
											</select>
										</div>
									</td>
									<!-- Lock 1 -->
									<td>
										<div>
											<div>
												<span ng-show="warrior.lock1" ng-click="warrior.lock1 = !warrior.lock1; warrior.viewed = false" 
													class="glyphicons glyphicons-lock"></span>
												<span ng-hide="warrior.lock1" ng-click="warrior.lock1 = !warrior.lock1; warrior.viewed = false" 
													class="glyphicons glyphicons-unlock"></span>
											</div>
									</td>
									<!-- Attack 2 -->
									<td>
										<div>
											<select ng-if="war.type != 'view'" ng-model="warrior.attack2" ng-disabled="warrior.name == 'Pick Warrior'"
												ng-change="war.adjustTargets(); warrior.lock2 = true; warrior.viewed = false">
												<option value="{{warrior.attack2}}" selected>{{ warrior.attack2 }}</option>
												<option value="Pick" ng-if="warrior.attack2 != 'Pick'">Pick</option>
												<option value="Hold" ng-if="warrior.attack2 != 'Hold'">Hold</option>
												<option value="Ask" ng-if="warrior.attack2 != 'Ask'">Ask</option>
												<option value="Scout" ng-if="warrior.attack2 != 'Scout'">Scout</option>
												<option value="Practice" ng-if="warrior.attack2 != 'Practice'">Practice</option>
												<option ng-repeat="option in war.attackOptions2" ng-if="warrior.attack1 != option" value="{{ option }}">{{ option }}</option>
											</select>
											<select ng-if="war.type == 'view'" ng-model="warrior.attack2" ng-change="war.adjustTargets()"
												ng-disabled="warrior.lock2 || main.userInfo.name != warrior.name">
												<option value="{{warrior.attack2}}" selected>{{ warrior.attack2 }}</option>
												<option ng-repeat="option in war.attackOptions" value="{{ option }}">{{ option }}</option>
											</select>
										</div>
									</td>
									<!-- Lock 2 -->
									<td>
										<div>
											<span ng-show="warrior.lock2" ng-click="warrior.lock2 = !warrior.lock2" class="glyphicons glyphicons-lock"></span>
											<span ng-hide="warrior.lock2" ng-click="warrior.lock2 = !warrior.lock2" class="glyphicons glyphicons-unlock"></span>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<!-- Image Upload Div -->
			<div ng-show="war.showWarriors" id="warriorStats" class="col-xs-12">
				
			</div>
			<div class="row show-hide-message" ng-show="war.message">
				<div class="col-sm-4 col-sm-offset-4 col-xs-12">
					<div class="alert alert-info">
						{{ war.message }}
					</div>
				</div>
			</div>
			<div ng-click="war.genWarriorList()" ng-if="war.type == 'create'" ng-hide="war.showWarriors" class="form-group col-sm-offset-4 col-sm-4">
				<div id="warriorList">
					<button class="btn btn-success btn-lg btn-block">Warrior List</button>
				</div>
			</div>
			<div ng-show="war.showWarriors && war.warriorsReady" class="form-group row col-sm-offset-4 col-sm-4">
				<div id="warriorList">
					<button ng-click="war.saveWar()" class="btn btn-success btn-lg btn-block" ng-if="war.type == 'create'">Create War</button>
					<button ng-click="war.updateWar(true)" class="btn btn-success btn-lg btn-block" ng-if="war.type != 'create'">Update War</button>
				</div>
			</div>
		</form>
		<div ng-show="war.loadingPage" class="jumbotron text-center" ng-show="war.processing"> 
			<span class="glyphicon glyphicon-repeat spinner"></span>
			<p>Loading War...</p>
		</div>
	</div>
</section>